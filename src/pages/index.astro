---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import {buildImageUrl} from '../lib/directus';
import Carousel from '../components/Carousel.astro';
import Code from '../components/Code.astro';

const [home] = await getCollection('home');
const customers = await getCollection('customer');
const references = await getCollection('reference');
const examples = await getCollection('example');
const testimonials = await getCollection('testimonial');
---

<Layout>

	<Carousel />

	<ul>
		{customers.map(c => (
			<li><Image src={buildImageUrl(c.data.logo)} alt={c.data.name} width={200} height={100}
					    /> {c.data.name}</li>
		))}
	</ul>
	<Code title="Home">
		{JSON.stringify(home, null, 2)}
	</Code>

	<Code title="references">
		{JSON.stringify(references, null, 2)}
	</Code>

	<Code title="customers">
		{JSON.stringify(customers, null, 2)}
	</Code>

	<Code title="testimonials">
		{JSON.stringify(testimonials, null, 2)}
	</Code>

	<Code title="examples">
		{JSON.stringify(examples, null, 2)}
	</Code>

</Layout>
