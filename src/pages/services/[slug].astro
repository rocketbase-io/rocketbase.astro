---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Code from '../../components/Code.astro';
import ExampleFaq from '../../components/example/ExampleFaq.astro';
import ExampleTestimonial from '../../components/example/ExampleTestimonial.astro';
import ServicesOverview from '../../components/ServicesOverview.astro';
import ExampleFeatured from '../../components/example/ExampleFeatured.astro';
import ExampleHero from '../../components/example/ExampleHero.astro';

const [benefit] = await getCollection('benefit');

export async function getStaticPaths() {
	const examples = await getCollection('example');
	return examples.map(r => ({params: {slug: r.data.slug}}));
}

const { slug } = Astro.params;

const examples = await getCollection('example');
const selected = examples.find(r => r.data.slug === slug)

---

<Layout>

	<ExampleHero image={selected?.data.hero_image} title={selected?.data.hero_title} message={selected?.data.hero_message} />

	<ExampleFeatured image={selected?.data.feature_image} title={selected?.data.feature_title} message={selected?.data.feature_message} bulletpoints={selected?.data.feature_bulletpoints} />

	<ServicesOverview />

	<ExampleTestimonial referenceIds={selected?.data.references} />

	<ExampleFaq title={benefit.data.faq_title} questions={benefit.data.faq_questions} />

</Layout>